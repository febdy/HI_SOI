drop table users;
drop sequence seq_video_no;
drop table video;
drop sequence seq_notice_no;
drop table notice;
drop sequence seq_post_no;
drop table post;
drop sequence seq_cmt_no;
drop table comments;
drop table scrap;

CREATE TABLE users (
    user_id VARCHAR2(20) not null,
    user_name   VARCHAR2(30) not null,
    user_email	VARCHAR2(100) not null,
    user_addr   VARCHAR2(200) not null,
    user_tel    VARCHAR2(20) not null,
    user_pwd    VARCHAR2(30) not null,
    user_nickname   VARCHAR2(20) not null,
    user_level  VARCHAR2(30) not null,
    reg_date    DATE DEFAULT SYSDATE,
    PRIMARY KEY(user_id)
);

-- 일단 video_time 메서드 찾기 전까지 video_time 삭제한 db 사용
CREATE TABLE video (
    video_no NUMBER(30) not null,
    user_id VARCHAR2(20) not null,
    video_origin_name   VARCHAR2(200) not null,
    video_save_name VARCHAR2(200) not null,
    video_ex_name   VARCHAR2(200) not null,
    video_path  VARCHAR2(1000) not null,
    video_size  NUMBER(20) not null,
    video_date  DATE DEFAULT SYSDATE,
    video_correct_line  VARCHAR2(100) not null,
    PRIMARY KEY(video_no),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE SEQUENCE seq_video_no
INCREMENT BY 1
START WITH 1;

--CREATE SEQUENCE seq_book_id
--INCREMENT BY 1 
--START WITH 1 ;

commit;

select *
from users;

select *
from video;

select *
from video
where video_no=21;

CREATE TABLE notice (
    noti_no NUMBER(10),
    noti_title  VARCHAR2(255),
    noti_content    VARCHAR2(4000),
    noti_date   DATE DEFAULT SYSDATE,
    noti_hit_cnt    NUMBER DEFAULT 0,
    user_id VARCHAR2(20) NOT NULL,
    PRIMARY KEY(noti_no),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE SEQUENCE seq_notice_no
INCREMENT BY 1 
START WITH 1;

delete from video
where user_id='realso0';

select *
from notice;

insert into users values('realso0','소한준','realso0@nate.com','인천','010-7533-5557','1','real','member',sysdate);
insert into users values('realso1','소한준','realso0@nate.com','인천','010-7533-5557','1','soso','member',sysdate);

insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목1', '게시글 내용1', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목2', '게시글 내용2', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목3', '게시글 내용3', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목4', '게시글 내용4', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목5', '게시글 내용5', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목6', '게시글 내용6', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목7', '게시글 내용7', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목7', '게시글 내용7', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목8', '게시글 내용8', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목9', '게시글 내용9', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목10', '게시글 내용10', sysdate, 0,'realso1');
insert into notice(noti_no, noti_title, noti_content, noti_date, noti_hit_cnt, user_id)
values (seq_notice_no.nextval, '게시글 제목11', '게시글 내용11', sysdate, 0,'realso1');

CREATE TABLE post (
    post_no NUMBER(10),
    writer_id VARCHAR2(20) not null,
    video_no NUMBER(30) not null,
    post_title  VARCHAR2(255),
    post_content    VARCHAR2(300),
    post_date   DATE DEFAULT SYSDATE,
    post_soi_cnt    NUMBER DEFAULT 0,
    post_cmt_cnt    NUMBER DEFAULT 0,
    post_hit_cnt    NUMBER DEFAULT 0,
    post_hide_face  VARCHAR2(10) default 'N',
    post_sharable   VARCHAR2(10) default 'N',
    post_anal_result    VARCHAR2(100),
    PRIMARY KEY(post_no),
    FOREIGN KEY (writer_id) REFERENCES users(user_id),
    FOREIGN KEY (video_no) REFERENCES video(video_no)
);

CREATE SEQUENCE seq_post_no
INCREMENT BY 1
START WITH 1;

select *
from post;

commit;

CREATE TABLE comments (
    cmt_no NUMBER(10),
    post_no NUMBER(10) not null,
    user_id VARCHAR2(20) not null,
    cmt_content VARCHAR2(4000),
    cmt_date    DATE DEFAULT SYSDATE,
    PRIMARY KEY(cmt_no),
    FOREIGN KEY (post_no) REFERENCES post(post_no),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

CREATE SEQUENCE seq_cmt_no
INCREMENT BY 1
START WITH 1;

insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요1', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요2', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요3', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요4', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요5', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요6', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '8', 'realso0', '잘하시네요7', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '8', 'realso0', '잘하시네요8', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요9', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요10', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요11', sysdate);
insert into comments(cmt_no, post_no, user_id, cmt_content, cmt_date)
values (seq_cmt_no.nextval, '10', 'realso0', '잘하시네요12', sysdate);

select *
from comments;

CREATE TABLE scrap (
    post_no NUMBER(10) not null,
    user_id VARCHAR2(20) not null,
    scrap_date    DATE DEFAULT SYSDATE,
    FOREIGN KEY (post_no) REFERENCES post(post_no),
    FOREIGN KEY (user_id) REFERENCES users(user_id)
);

select *
from scrap;
            
select *
from comments;

commit;